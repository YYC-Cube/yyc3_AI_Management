# YanYu CloudÂ³ æ™ºèƒ½ä¸šåŠ¡ç®¡ç†ç³»ç»Ÿ

![YanYu CloudÂ³](public/logo.png)

[![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue?logo=typescript)](https://www.typescriptlang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-14.0-black?logo=next.js)](https://nextjs.org/)
[![Node.js](https://img.shields.io/badge/Node.js-20.x-green?logo=node.js)](https://nodejs.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-blue?logo=postgresql)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-7.x-red?logo=redis)](https://redis.io/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

æ–°ä¸€ä»£ä¼ä¸šçº§æ™ºèƒ½ä¸šåŠ¡ç®¡ç†å¹³å° â€” é›†æˆè´¢åŠ¡å¯¹è´¦ã€å·¥å•ç®¡ç†ã€å®æ—¶ç›‘æ§ä¸ AI æ™ºèƒ½åˆ†æï¼Œé¢å‘é«˜å¹¶å‘ã€é«˜å¯ç”¨ä¸å¯æ‰©å±•çš„ä¼ä¸šåœºæ™¯ã€‚

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ) â€¢ [API æ–‡æ¡£](#-api-æ¥å£æ–‡æ¡£) â€¢ [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) â€¢ [å®‰å…¨ç­–ç•¥](#-å®‰å…¨ç­–ç•¥)

---

## ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)  
- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)  
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)  
- [å®Œæ•´æ–‡ä»¶æ ‘ï¼ˆæ¦‚è§ˆï¼‰](#-å®Œæ•´æ–‡ä»¶æ ‘)  
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)  
- [ç¯å¢ƒé…ç½®](#-ç¯å¢ƒé…ç½®)  
- [API æ¥å£æ–‡æ¡£ï¼ˆæ¦‚è§ˆï¼‰](#-api-æ¥å£æ–‡æ¡£)  
- [æ¨¡å—è¯´æ˜](#-æ¨¡å—è¯´æ˜)  
- [æµ‹è¯•æŒ‡å—](#-æµ‹è¯•æŒ‡å—)  
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)  
- [ç›‘æ§ä¸è¿ç»´](#-ç›‘æ§ä¸è¿ç»´)  
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)  
- [è®¸å¯è¯](#-è®¸å¯è¯)  
- [è”ç³»ä¸è‡´è°¢](#-è”ç³»ä¸è‡´è°¢)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

YanYu CloudÂ³ï¼ˆç®€ç§° Yanyuï¼‰æ˜¯ä¸€ä¸ªé¢å‘ä¼ä¸šçš„æ™ºèƒ½ä¸šåŠ¡ç®¡ç†ç³»ç»Ÿï¼Œæä¾›ï¼š
- é«˜æ€§èƒ½çš„æ•°æ®å¤„ç†ï¼ˆRedis ç¼“å­˜ã€ä¼˜åŒ–æŸ¥è¯¢ï¼‰
- AI é©±åŠ¨çš„å¼‚å¸¸åˆ†æä¸å»ºè®®ï¼ˆOpenAI é›†æˆï¼‰
- å®æ—¶é€šä¿¡ï¼ˆSocket.IOï¼‰
- å®Œæ•´çš„å¯è§‚æµ‹æ€§ï¼ˆPrometheus + Grafanaï¼‰
- å¤šç§Ÿæˆ·ã€RBAC åŠä¼ä¸šçº§å®‰å…¨ç­–ç•¥

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

ä¸»è¦åŠŸèƒ½æ¨¡å—åŒ…æ‹¬ï¼š

- è´¢åŠ¡å¯¹è´¦ï¼šCSV å¯¼å…¥/å¯¼å‡ºã€è‡ªåŠ¨å¯¹è´¦ã€å¼‚å¸¸ç®¡ç†ã€å¯¹è´¦æŠ¥å‘Šï¼ˆExcel/PDFï¼‰ã€AI æ ¹å› åˆ†æ  
- å·¥å•ç³»ç»Ÿï¼šå·¥å•ç”Ÿå‘½å‘¨æœŸã€SLA ç›‘æ§ã€å®¡æ‰¹æµç¨‹ã€å®æ—¶æ¨é€ã€ç»Ÿè®¡åˆ†æ  
- æ•°æ®ä¸­å¿ƒï¼šå®æ—¶ç›‘æ§å¤§å±ã€å¤šç»´åˆ†æã€è‡ªå®šä¹‰æŠ¥è¡¨ã€è¶‹åŠ¿é¢„æµ‹ã€KPI è¿½è¸ª  
- AI æ™ºèƒ½å¼•æ“ï¼šå¼‚å¸¸æ¨¡å¼è¯†åˆ«ã€è‡ªç„¶è¯­è¨€æŸ¥è¯¢ã€çŸ¥è¯†åº“ã€æ¨¡å‹è®­ç»ƒä¸æ¨è  
- ç³»ç»Ÿç®¡ç†ï¼šç”¨æˆ·/è§’è‰²/æƒé™ã€å®¡è®¡æ—¥å¿—ã€ç³»ç»Ÿé…ç½®ã€å¤šç§Ÿæˆ·æ”¯æŒ

---

## ğŸ›  æŠ€æœ¯æ ˆ

å‰ç«¯ï¼šNext.js 14ã€React 18ã€TypeScriptã€Tailwind CSSã€shadcn/uiã€Storybook  
åç«¯ï¼šNode.js 20ã€Expressã€TypeScriptã€PostgreSQL 16ã€Redis 7ã€Socket.IOã€OpenAI SDK  
åŸºç¡€è®¾æ–½ï¼šDocker / Docker Composeã€Prometheusã€Grafanaã€GitHub Actionsã€Vercelã€Nginx

---

## ğŸ“ å®Œæ•´æ–‡ä»¶æ ‘ï¼ˆæ¦‚è§ˆï¼‰

ä¸»è¦æ¨¡å—ä¸ç›®å½•ï¼ˆå·²ç®€åŒ–ï¼‰ï¼š

- app/ â€” Next.js App Routerï¼ˆå‰ç«¯å…¥å£ï¼‰  
- backend/ â€” åç«¯æœåŠ¡ï¼ˆsrc/config, services, routes, middleware, testsï¼‰  
- components/ â€” å¯å¤ç”¨ React ç»„ä»¶ï¼ˆuiã€financeã€ai-engine ç­‰ï¼‰  
- package-ui/, design-system/ â€” ç»„ä»¶åŒ…ä¸è®¾è®¡ç³»ç»Ÿ  
- scripts/ â€” Dockerfileã€docker-composeã€éƒ¨ç½²ä¸æµ‹è¯•è„šæœ¬  
- docs/ â€” æŠ€æœ¯æ–‡æ¡£ä¸éƒ¨ç½²/é›†æˆè¯´æ˜  
- database/ â€” migrations & seeds  
- .github/ â€” CI/CD workflow

ï¼ˆä»“åº“å†…è¿˜åŒ…å« env ç¤ºä¾‹ã€READMEã€LICENSE ç­‰æ”¯æŒæ–‡ä»¶ï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

å…ˆå†³æ¡ä»¶ï¼šNode.js >= 20ã€PostgreSQL >= 16ã€Redis >= 7ã€pnpm/npmã€Dockerï¼ˆå¯é€‰ï¼‰ã€OpenAI API Key

æœ¬åœ°å¼€å‘æ­¥éª¤ï¼ˆç¤ºä¾‹ï¼‰ï¼š

1. å…‹éš†ä»“åº“
   git clone https://github.com/YY-Nexus/YYC-AI-management.git
   cd YYC-AI-management

2. å®‰è£…ä¾èµ–ï¼ˆå‰ç«¯/æ ¹ï¼‰
   npm install

3. åç«¯ä¾èµ–
   cd backend && npm install && cd ..

4. é…ç½®ç¯å¢ƒå˜é‡
   cp .env.example .env
   cp backend/.env.example backend/.env
   å¡«å†™å¿…è¦å˜é‡ï¼ˆæ•°æ®åº“ã€Redisã€JWTã€OPENAI_API_KEY ç­‰ï¼‰

5. å¯åŠ¨æ•°æ®åº“ï¼ˆDockerï¼‰
   docker-compose -f scripts/docker-compose.dev.yml up -d postgres redis

6. è¿è¡Œæ•°æ®åº“è¿ç§»ä¸ç§å­
   cd backend
   npm run migrate
   npm run seed
   cd ..

7. å¯åŠ¨åç«¯
   cd backend && npm run dev

8. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
   npm run dev

9. å¯åŠ¨ Storybookï¼ˆå¯é€‰ï¼‰
   npm run storybook

---

## âš™ï¸ ç¯å¢ƒé…ç½®ï¼ˆç¤ºä¾‹ï¼‰

å‰ç«¯ (.env)
- NEXT_PUBLIC_API_BASE_URL=http://localhost:3001
- NEXT_PUBLIC_ENV=development
- NEXT_PUBLIC_WS_URL=ws://localhost:3001

åç«¯ (backend/.env)
- PORT=3001
- NODE_ENV=development
- DB_HOST=localhost
- DB_PORT=5432
- DB_NAME=yanyu_cloud
- DB_USER=postgres
- DB_PASSWORD=your_secure_password
- REDIS_HOST=localhost
- REDIS_PORT=6379
- JWT_SECRET=your_jwt_secret_key_min_32_characters
- OPENAI_API_KEY=sk-xxxx
- FRONTEND_BASE_URL=http://localhost:3000

è¯·å‹¿æŠŠçœŸå®å¯†é’¥æäº¤åˆ°ä»“åº“ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ CI/Secrets ç®¡ç†ã€‚

---

## ğŸ“¡ API æ¥å£æ–‡æ¡£ï¼ˆæ¦‚è§ˆï¼‰

åŸºç¡€ URLï¼š
- å¼€å‘ï¼šhttp://localhost:3001/api
- ç”Ÿäº§ï¼šhttps://api.yanyu-cloud.com/api

è®¤è¯ï¼šæ‰€æœ‰è¯·æ±‚åœ¨ Header æºå¸¦ JWT
Authorization: Bearer <token>

å¸¸è§æ¥å£ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼‰ï¼š
- GET /api/reconciliation/records â€” è·å–å¯¹è´¦è®°å½•åˆ—è¡¨
- POST /api/reconciliation/records â€” åˆ›å»ºå¯¹è´¦è®°å½•
- POST /api/reconciliation/auto-reconcile â€” æ‰§è¡Œè‡ªåŠ¨å¯¹è´¦
- POST /api/csv-import/upload â€” ä¸Šä¼  CSVï¼ˆmultipart/form-dataï¼‰
- POST /api/ai-analysis/analyze/:recordId â€” AI åˆ†æå•æ¡å¼‚å¸¸
- GET /api/tickets â€” è·å–å·¥å•åˆ—è¡¨
- POST /api/tickets â€” åˆ›å»ºå·¥å•
- WebSocketï¼šé€šè¿‡ Socket.IO è¿æ¥å¹¶ç›‘å¬ notificationã€ticket:updateã€reconciliation:update ç­‰äº‹ä»¶

é”™è¯¯å“åº”ç»Ÿä¸€æ ¼å¼ï¼š
{
  "success": false,
  "error": { "code": "...", "message": "...", "details": [...] }
}

å¸¸è§é”™è¯¯ç ï¼šUNAUTHORIZED(401), FORBIDDEN(403), NOT_FOUND(404), VALIDATION_ERROR(400), RATE_LIMIT_EXCEEDED(429), INTERNAL_ERROR(500)

ï¼ˆå®Œæ•´æ¥å£ä¸ç¤ºä¾‹åœ¨ docs/ æˆ–åå° routes æ–‡ä»¶å¤¹ä¸­ï¼‰

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡ï¼ˆé‡ç‚¹è¡¨ï¼‰

ç¤ºä¾‹è¡¨ï¼š
- reconciliation_recordsï¼ˆå¯¹è´¦è®°å½•ï¼‰
- reconciliation_exceptionsï¼ˆå¼‚å¸¸è®°å½•ï¼‰
- ticketsï¼ˆå·¥å•ï¼‰
- usersï¼ˆç”¨æˆ·ï¼‰

æ¨èç´¢å¼•ï¼štransaction_dateã€statusã€customer_nameã€record_idã€assigned_toã€created_at ç­‰ã€‚

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

å•å…ƒæµ‹è¯•ï¼ˆåç«¯ï¼‰ï¼š
cd backend
npm test
ç”Ÿæˆ coverageï¼šnpm test -- --coverage

é›†æˆæµ‹è¯•ï¼š
npm run test:integration

æ€§èƒ½æµ‹è¯•ï¼š
k6 run backend/performance/k6-load-test.js

E2Eï¼ˆPlaywrightï¼‰ï¼š
npm run test:e2e

æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ï¼šæ€»ä½“ >= 90%

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

å¼€å‘éƒ¨ç½²ï¼ˆDocker Composeï¼‰ï¼š
docker-compose -f scripts/docker-compose.dev.yml up -d

ç”Ÿäº§éƒ¨ç½²ï¼ˆç¤ºä¾‹ï¼‰ï¼š
- Docker é•œåƒæ„å»ºï¼šdocker build -t yanyu-cloud3-backend -f scripts/Dockerfile .
- ä½¿ç”¨ docker-compose.prod.yml å¯åŠ¨
- æˆ–æ„å»ºé™æ€å‰ç«¯å¹¶åœ¨ä¼ ç»Ÿä¸»æœºä¸Šè¿è¡Œåç«¯ï¼ˆpm2 ç®¡ç†ï¼‰

Nginx åå‘ä»£ç†ç¤ºä¾‹ï¼ˆæä¾› WebSocket æ”¯æŒï¼‰è§ docs.

ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä½¿ç”¨å¼ºå¯†ç ã€å¯†é’¥ç®¡ç†ä¸ HTTPSã€‚

---

## ğŸ“Š ç›‘æ§ä¸è¿ç»´

Prometheus æŒ‡æ ‡ç¤ºä¾‹ï¼š
- http_requests_total, http_request_duration_seconds
- db_pool_size, redis_memory_usage_bytes
- cache_hit_rate, websocket_connections_total
- ai_analysis_requests_total

Grafanaï¼šå¯¼å…¥ scripts/grafana-dashboard.json ä½œä¸ºç›‘æ§é¢æ¿ã€‚

å‘Šè­¦è§„åˆ™ç¤ºä¾‹ï¼ˆPrometheusï¼‰åŒ…æ‹¬é«˜é”™è¯¯ç‡ã€è¿æ¥æ± è€—å°½ã€ç¼“å­˜å‘½ä¸­ç‡ä½ç­‰ã€‚

æ—¥å¿—ç®¡ç†ï¼šWinstonï¼ˆåç«¯ï¼‰ï¼Œæ—¥å¿—ç­‰çº§ INFO/WARN/ERROR/DEBUGã€‚å®¹å™¨æ—¥å¿—é€šè¿‡ docker-compose logs æŸ¥çœ‹æˆ–é›†ä¸­å¼æ—¥å¿—ç³»ç»Ÿæ”¶é›†ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¼€å‘æµç¨‹ï¼š
- Fork â†’ æ–°åˆ†æ”¯ï¼ˆfeature/xxxï¼‰â†’ æäº¤ â†’ PR  
- æäº¤ä¿¡æ¯éµå¾ª Conventional Commitsï¼ˆfeat/fix/docs/...ï¼‰  
- æ‰€æœ‰æ–°åŠŸèƒ½éœ€åŒ…å«å•å…ƒæµ‹è¯•ä¸æ–‡æ¡£æ›´æ–°

ä»£ç è§„èŒƒï¼š
- TypeScriptã€ESLintã€Prettierï¼ˆä»“åº“å†…é…ç½®ï¼‰  
- å‘½åä¸é£æ ¼ï¼šæ–‡ä»¶ kebab-caseã€ç±» PascalCaseã€å‡½æ•° camelCase

---

## ğŸ”’ å®‰å…¨ç­–ç•¥

å®‰å…¨æªæ–½åŒ…æ‹¬ RBACã€JWT è®¤è¯ã€æ•æ„Ÿæ•°æ®åŠ å¯†ã€HTTPSã€å®¡è®¡æ—¥å¿—ä¸å®‰å…¨äº‹ä»¶å“åº”æµç¨‹ï¼ˆè¯·å‚è§ SECURITY.mdï¼‰ã€‚æ¼æ´æŠ¥å‘Šï¼šadmin@0379.emailï¼ˆ24å°æ—¶ç¡®è®¤ï¼Œ72å°æ—¶æä¾›åˆæ­¥è¯„ä¼°ï¼‰ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSE æ–‡ä»¶ã€‚

---

## ğŸ“ è”ç³»ä¸è‡´è°¢

- ä»“åº“ï¼šhttps://github.com/YYC-EasyVizAI/YYC-AI-management  
- åé¦ˆï¼šIssues / Discussionsï¼ˆä»“åº“é¡µé¢ï¼‰  
- é‚®ç®±ï¼šadmin@0379.email

æ„Ÿè°¢ Next.jsã€Expressã€PostgreSQLã€Redisã€OpenAIã€shadcn/uiã€Socket.IOã€Tailwind CSS ç­‰å¼€æºé¡¹ç›®ã€‚

Built with â¤ï¸ by YY-Nexus Team
